@* Generator: WebPage *@

@inherits Piranha.WebPages.ContentPage<Piranha.Manager.Models.ParamListModel>
@using Piranha.Manager
@{
    if (!User.HasAccess("ADMIN_PARAM")) {
        Response.Redirect("~/manager/account") ;
    }
    
    Page.Title = Piranha.Resources.Settings.ListTitleParams ;
    Layout = "~/Manager/Shared/_Layout.cshtml" ;    

	var msg = Request["msg"] ;
	if (!String.IsNullOrEmpty(msg)) {
		if (msg.ToLower() == "deleted") {
			this.SuccessMessage(Piranha.Resources.Settings.MessageParamDeleted) ;
		} else if (msg.ToLower() == "notdeleted") {
			this.ErrorMessage(Piranha.Resources.Settings.MessageParamNotDeleted) ;
		}
	}

	if (Hooks.ParamListModelLoaded != null) {
		Hooks.ParamListModelLoaded(this, Menu.GetActiveMenuItem(), Model) ;
    }
}
@section Head {
    <script type="text/javascript">
        $(document).ready(function () {
            $(document).ready(function () {
                var options = {
                    listClass: 'list-js',
                    searchId: 'search',
                    valueNames: ['name', 'updated', 'created']
                };
                var list = new List('list', options);
            });
        });
    </script>
}
@section Toolbar {
<div class="toolbar">
    <div class="inner">
        <ul>
            <li id="add"><a href="@Href("~/manager/param/edit")" class="add">@Piranha.Resources.Global.ToolbarAdd</a></li>
            <li><a href="@Href("~/manager/param")" class="refresh">@Piranha.Resources.Global.ToolbarReload</a></li>
        </ul>
        <button class="search"></button>@Html.TextBox("search")
        <div class="clear"></div>
    </div>
</div>
}
<div class="grid_12">
    <table id="list" class="list">
        <thead>
            <tr>
                <th><span class="sort asc" data-sort="name">@Piranha.Resources.Global.Name</span></th>
                <th class="date"><span class="sort" data-sort="updated">@Piranha.Resources.Global.Updated</span></th>
                <th class="date"><span class="sort" data-sort="created">@Piranha.Resources.Global.Created</span></th>
                <th class="one"></th>
            </tr>
        </thead>
        <tbody class="list-js">
            @foreach (var param in Model.Params) {
            <tr>
                <td class="name"><a href="@Href("~/manager/param/edit/" + param.Id)">@param.Name</a></td>
                <td class="updated">@param.Updated.ToString("yyyy-MM-dd")</td>
                <td class="created">@param.Created.ToString("yyyy-MM-dd")</td>
                <td class="buttons">
                    @if (!param.IsLocked) {
                    <a class="icon delete" href="@Href("~/manager/param/edit/delete/" + param.Id + "/true")"></a>
                    }
                </td>
            </tr>
            }
        </tbody>
    </table>
</div>